{% extends "index.html" %}
{% load static %}
{% load wagtailcore_tags wagtailimages_tags %}
{% block extra_css %}

{% endblock %}
{% block body_class %}template-salespage{% endblock %}

{% block content %}
	{% if errors %}
	<div class="alert alert-danger" role="alert">
		{% for e in errors %}
			{{e}}
		{% endfor %}
	</div>
	{% endif %}
	<div class="form-wrap">
		<div class="d-sm-flex align-items-center justify-content-between mb-4">
			<h1 class="h3 mr-auto mb-0 text-gray-800">Orders</h1>
			<a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm mr-2"><i class="fas fa-shipping-fast"></i> Ship My Orders</a>
		</div>
		<div class="row">
			<div class="card container-fluid mb-3">
				<ul class="nav nav-tabs" role="tablist">
					<li class="nav-item ml-2 p-1">
						<a class="nav-link active" id="all-tab" data-toggle="tab" href="#" role="tab">All</a>
					</li>
					<li class="nav-item ml-2 p-1">
						<a class="nav-link" id="unpaid-tab" data-toggle="tab" href="#" role="tab">Unpaid</a>
					</li>
					<li class="nav-item ml-2 p-1">
						<a class="nav-link" id="to-ship-tab" data-toggle="tab" href="#" role="tab">To Ship</a>
					</li>
					<li class="nav-item ml-2 p-1">
						<a class="nav-link" id="shipping-tab" data-toggle="tab" href="#" role="tab">Shipping<var>(1)</var></a>
					</li>
					<li class="nav-item ml-2 p-1">
						<a class="nav-link" id="completed-tab" data-toggle="tab" href="#" role="tab">Completed</a>
					</li>
					<li class="nav-item ml-2 p-1">
						<a class="nav-link" id="cancellation-tab" data-toggle="tab" href="#" role="tab">Cancellation</a>
					</li>
					<li class="nav-item ml-2 p-1">
						<a class="nav-link" id="return-refund-tab" data-toggle="tab" href="#" role="tab">Return / Refund</a>
					</li>
				</ul>
			</div>
		</div>
		<div class="row" id="process" style="display: none;">
			<ul class="nav" role="tablist">
				<li class="nav-item ml-2 p-1">
					<a class="btn btn-sm btn-outline-primary active" id="all2" data-toggle="tab" href="#" role="tab">All</a>
				</li>
				<li class="nav-item ml-2 p-1">
					<a class="btn btn-sm btn-outline-primary" id="to_process" data-toggle="tab" href="#" role="tab">To Process</a>
				</li>
				<li class="nav-item ml-2 p-1">
					<a class="btn btn-sm btn-outline-primary" id="processed" data-toggle="tab" href="#" role="tab">Processed</a>
				</li>
			</ul>
		</div>
		<div class="row">
			<div class="body-content table-responsive">
				<table class="table">
					<thead>
						<tr>
							<th scope="col">Product(s)</th>
							<th scope="col"></th>
							<th scope="col">Order Total</th>
							<th scope="col">Status</th>
							<th scope="col">Countdown</th>
							<th scope="col">
								<a class="dropdown-toggle" id="all_channels" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">All Channels</a>
								<ul class="dropdown-menu">
									<li class="dropdown-item">Sample</li>
									<li class="dropdown-item">List</li>
									<li class="dropdown-item">Items</li>
									<li class="dropdown-item">Value</li>
									<li class="dropdown-item">Hi!</li>
								</ul>
							</th>
							<th scope="col">Actions</th>
						</tr>
					</thead>
					<tbody id="orders">
						{% for user, order in allUsersOrders %}
							<tr class="tr-top">
								<td colspan="7">
									Order ID: {{order.id}}
								</td>
							</tr>
							<tr class="tr-middle">
								<td colspan="7">
									User: {{user}}
								</td>
							</tr>
							{% for product in order.products.all %}
							<tr class="tr-middle">
									<td scope="row">
											<a href="/products/edit/{{product.category}}/{{product.id}}/">
													{% if product.variations.all.0.image_url %}
															<img src="{{product.variations.all.0.image_url}}" alt="" width="80"/>
													{% elif product.variations.all.0.image_upload %}
															<img src="{{product.variations.all.0.image_url_from_upload}}" alt="" width="80"/>
													{% elif product.variations.all.0.image_url_from_sku %}
															<img src="{{product.variations.all.0.image_url_from_sku}}" alt="" width="80"/>
													{% else %}
															<img src="{% static 'images/download.svg' %}" alt="" width="80"/>
													{% endif %}
											</a>
									</td>
									<td class="text-center">
										{% if product.product_name %}
										{{product.product_name}}
										{% else %} -
										{% endif %}
									</td>
									{% if forloop.counter0 == 0 %}
										<td class="text-center">
											{% if order.total %}
											{{order.total}}
											{% else %} -
											{% endif %}
										</td>
										<td class="text-center">
												{% if order.status %}
												{{order.status}}
												{% else %} -
												{% endif %}
										</td>
										<td class="text-center">
												{% if order.countdown %}
												{{order.countdown}}
												{% else %} -
												{% endif %}
										</td>
										<td class="text-center">
												{% if order.shipping_channel %}
												{{order.shipping_channel}}
												{% else %} -
												{% endif %}
										</td>
										<td class="text-center">
												<div class="dropdown show">
														<a class="dropdown-toggle-xl" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
														</a>
														<div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
															<a class="dropdown-item" href="#">Arrange Pickup</a>
														</div>
												</div>
										</td>
									{% else %}
										<td colspan="6"></td>
									{% endif %}
							</tr>
							{% endfor %}
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
{% endblock %}
{% block extra_js %}

{% endblock %}